{"remainingRequest":"F:\\code\\WorkSpace\\mindundisloyalty\\node_modules\\thread-loader\\dist\\cjs.js??ref--9-2!F:\\code\\WorkSpace\\mindundisloyalty\\node_modules\\ts-loader\\index.js??ref--9-3!F:\\code\\WorkSpace\\mindundisloyalty\\node_modules\\eslint-loader\\dist\\cjs.js!F:\\code\\WorkSpace\\mindundisloyalty\\src\\main\\webapp\\app\\core\\login\\login.service.ts","dependencies":[{"path":"F:\\code\\WorkSpace\\mindundisloyalty\\src\\main\\webapp\\app\\core\\login\\login.service.ts","mtime":1582739355196},{"path":"F:\\code\\WorkSpace\\mindundisloyalty\\node_modules\\angular2-template-loader\\index.js","mtime":1486570058000},{"path":"F:\\code\\WorkSpace\\mindundisloyalty\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\code\\WorkSpace\\mindundisloyalty\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\code\\WorkSpace\\mindundisloyalty\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"F:\\code\\WorkSpace\\mindundisloyalty\\node_modules\\eslint-loader\\dist\\cjs.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tICJ0c2xpYiI7DQp2YXIgX2EsIF9iOw0KaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOw0KaW1wb3J0IHsgTG9jYXRpb24gfSBmcm9tICdAYW5ndWxhci9jb21tb24nOw0KaW1wb3J0IHsgQXV0aFNlcnZlclByb3ZpZGVyIH0gZnJvbSAnYXBwL2NvcmUvYXV0aC9hdXRoLXNlc3Npb24uc2VydmljZSc7DQpsZXQgTG9naW5TZXJ2aWNlID0gY2xhc3MgTG9naW5TZXJ2aWNlIHsNCiAgICBjb25zdHJ1Y3Rvcihsb2NhdGlvbiwgYXV0aFNlcnZlclByb3ZpZGVyKSB7DQogICAgICAgIHRoaXMubG9jYXRpb24gPSBsb2NhdGlvbjsNCiAgICAgICAgdGhpcy5hdXRoU2VydmVyUHJvdmlkZXIgPSBhdXRoU2VydmVyUHJvdmlkZXI7DQogICAgfQ0KICAgIGxvZ2luKCkgew0KICAgICAgICAvLyBJZiB5b3UgaGF2ZSBjb25maWd1cmVkIG11bHRpcGxlIE9JREMgcHJvdmlkZXJzLCB0aGVuLCB5b3UgY2FuIHVwZGF0ZSB0aGlzIFVSTCB0byAvbG9naW4uDQogICAgICAgIC8vIEl0IHdpbGwgc2hvdyBhIFNwcmluZyBTZWN1cml0eSBnZW5lcmF0ZWQgbG9naW4gcGFnZSB3aXRoIGxpbmtzIHRvIGNvbmZpZ3VyZWQgT0lEQyBwcm92aWRlcnMuDQogICAgICAgIGxvY2F0aW9uLmhyZWYgPSBgJHtsb2NhdGlvbi5vcmlnaW59JHt0aGlzLmxvY2F0aW9uLnByZXBhcmVFeHRlcm5hbFVybCgnb2F1dGgyL2F1dGhvcml6YXRpb24vb2lkYycpfWA7DQogICAgfQ0KICAgIGxvZ291dCgpIHsNCiAgICAgICAgdGhpcy5hdXRoU2VydmVyUHJvdmlkZXIubG9nb3V0KCkuc3Vic2NyaWJlKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5ib2R5Ow0KICAgICAgICAgICAgbGV0IGxvZ291dFVybCA9IGRhdGEubG9nb3V0VXJsOw0KICAgICAgICAgICAgY29uc3QgcmVkaXJlY3RVcmkgPSBgJHtsb2NhdGlvbi5vcmlnaW59JHt0aGlzLmxvY2F0aW9uLnByZXBhcmVFeHRlcm5hbFVybCgnLycpfWA7DQogICAgICAgICAgICAvLyBpZiBLZXljbG9haywgdXJpIGhhcyBwcm90b2NvbC9vcGVuaWQtY29ubmVjdC90b2tlbg0KICAgICAgICAgICAgaWYgKGxvZ291dFVybC5pbmRleE9mKCcvcHJvdG9jb2wnKSA+IC0xKSB7DQogICAgICAgICAgICAgICAgbG9nb3V0VXJsID0gbG9nb3V0VXJsICsgJz9yZWRpcmVjdF91cmk9JyArIHJlZGlyZWN0VXJpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgLy8gT2t0YQ0KICAgICAgICAgICAgICAgIGxvZ291dFVybCA9IGxvZ291dFVybCArICc/aWRfdG9rZW5faGludD0nICsgZGF0YS5pZFRva2VuICsgJyZwb3N0X2xvZ291dF9yZWRpcmVjdF91cmk9JyArIHJlZGlyZWN0VXJpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBsb2dvdXRVcmw7DQogICAgICAgIH0pOw0KICAgIH0NCn07DQpMb2dpblNlcnZpY2UgPSB0c2xpYl8xLl9fZGVjb3JhdGUoWw0KICAgIEluamVjdGFibGUoeyBwcm92aWRlZEluOiAncm9vdCcgfSksDQogICAgdHNsaWJfMS5fX21ldGFkYXRhKCJkZXNpZ246cGFyYW10eXBlcyIsIFt0eXBlb2YgKF9hID0gdHlwZW9mIExvY2F0aW9uICE9PSAidW5kZWZpbmVkIiAmJiBMb2NhdGlvbikgPT09ICJmdW5jdGlvbiIgPyBfYSA6IE9iamVjdCwgdHlwZW9mIChfYiA9IHR5cGVvZiBBdXRoU2VydmVyUHJvdmlkZXIgIT09ICJ1bmRlZmluZWQiICYmIEF1dGhTZXJ2ZXJQcm92aWRlcikgPT09ICJmdW5jdGlvbiIgPyBfYiA6IE9iamVjdF0pDQpdLCBMb2dpblNlcnZpY2UpOw0KZXhwb3J0IHsgTG9naW5TZXJ2aWNlIH07DQo="},{"version":3,"file":"F:\\code\\WorkSpace\\mindundisloyalty\\src\\main\\webapp\\app\\core\\login\\login.service.ts","sourceRoot":"","sources":["F:\\code\\WorkSpace\\mindundisloyalty\\node_modules\\eslint-loader\\dist\\cjs.js!F:\\code\\WorkSpace\\mindundisloyalty\\src\\main\\webapp\\app\\core\\login\\login.service.ts"],"names":[],"mappings":";;AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAC3C,OAAO,EAAE,QAAQ,EAAE,MAAM,iBAAiB,CAAC;AAC3C,OAAO,EAAE,kBAAkB,EAAE,MAAM,oCAAoC,CAAC;AAGxE,IAAa,YAAY,GAAzB,MAAa,YAAY;IACvB,YAAoB,QAAkB,EAAU,kBAAsC;QAAlE,aAAQ,GAAR,QAAQ,CAAU;QAAU,uBAAkB,GAAlB,kBAAkB,CAAoB;IAAG,CAAC;IAE1F,KAAK;QACH,2FAA2F;QAC3F,+FAA+F;QAC/F,QAAQ,CAAC,IAAI,GAAG,GAAG,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,2BAA2B,CAAC,EAAE,CAAC;IACvG,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,kBAAkB,CAAC,MAAM,EAAE,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE;YACpD,MAAM,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;YAC3B,IAAI,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;YAC/B,MAAM,WAAW,GAAG,GAAG,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,GAAG,CAAC,EAAE,CAAC;YAEjF,qDAAqD;YACrD,IAAI,SAAS,CAAC,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,EAAE;gBACvC,SAAS,GAAG,SAAS,GAAG,gBAAgB,GAAG,WAAW,CAAC;aACxD;iBAAM;gBACL,OAAO;gBACP,SAAS,GAAG,SAAS,GAAG,iBAAiB,GAAG,IAAI,CAAC,OAAO,GAAG,4BAA4B,GAAG,WAAW,CAAC;aACvG;YACD,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,SAAS,CAAC;QACnC,CAAC,CAAC,CAAC;IACL,CAAC;CACF,CAAA;AAzBY,YAAY;IADxB,UAAU,CAAC,EAAE,UAAU,EAAE,MAAM,EAAE,CAAC;iEAEH,QAAQ,oBAAR,QAAQ,oDAA8B,kBAAkB,oBAAlB,kBAAkB;GAD3E,YAAY,CAyBxB;SAzBY,YAAY","sourcesContent":["import { Injectable } from '@angular/core';\nimport { Location } from '@angular/common';\nimport { AuthServerProvider } from 'app/core/auth/auth-session.service';\n\n@Injectable({ providedIn: 'root' })\nexport class LoginService {\n  constructor(private location: Location, private authServerProvider: AuthServerProvider) {}\n\n  login() {\n    // If you have configured multiple OIDC providers, then, you can update this URL to /login.\n    // It will show a Spring Security generated login page with links to configured OIDC providers.\n    location.href = `${location.origin}${this.location.prepareExternalUrl('oauth2/authorization/oidc')}`;\n  }\n\n  logout() {\n    this.authServerProvider.logout().subscribe(response => {\n      const data = response.body;\n      let logoutUrl = data.logoutUrl;\n      const redirectUri = `${location.origin}${this.location.prepareExternalUrl('/')}`;\n\n      // if Keycloak, uri has protocol/openid-connect/token\n      if (logoutUrl.indexOf('/protocol') > -1) {\n        logoutUrl = logoutUrl + '?redirect_uri=' + redirectUri;\n      } else {\n        // Okta\n        logoutUrl = logoutUrl + '?id_token_hint=' + data.idToken + '&post_logout_redirect_uri=' + redirectUri;\n      }\n      window.location.href = logoutUrl;\n    });\n  }\n}\n"]}]}